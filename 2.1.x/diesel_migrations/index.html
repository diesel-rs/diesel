<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Provides functions for maintaining database schema."><title>diesel_migrations - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-081576b923113409.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="diesel_migrations" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0-nightly (e3181b091 2024-04-18)" data-channel="nightly" data-search-js="search-5b46ae87cc198d72.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-e32f0c247825364d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../diesel_migrations/index.html">diesel_migrations</a><span class="version">2.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../diesel_migrations/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">diesel_migrations</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/diesel_migrations/lib.rs.html#3-52">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Provides functions for maintaining database schema.</p>
<p>A database migration always provides procedures to update the schema, as well as to revert
itself. Diesel’s migrations are versioned, and run in order. Diesel also takes care of tracking
which migrations have already been run automatically. Your migrations don’t need to be
idempotent, as Diesel will ensure no migration is run twice unless it has been reverted.</p>
<p>Migrations should be placed in a <code>/migrations</code> directory at the root of your project (the same
directory as <code>Cargo.toml</code>). When any of these functions are run, Diesel will search for the
migrations directory in the current directory and its parents, stopping when it finds the
directory containing <code>Cargo.toml</code>.</p>
<p>Individual migrations should be a folder containing two files, <code>up.sql</code> and <code>down.sql</code>.
<code>up.sql</code> will be used to run the migration, while <code>down.sql</code> will be used for reverting it. The
folder itself should have the structure <code>{version}_{migration_name}</code>. It is recommended that
you use the timestamp of creation for the version.</p>
<p>Migrations can either be run with the CLI or embedded into the compiled application
and executed with code, for example right after establishing a database connection.
For more information, consult the <a href="macro.embed_migrations.html" title="macro diesel_migrations::embed_migrations"><code>embed_migrations!</code></a> macro.</p>
</div></details><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.embed_migrations.html" title="macro diesel_migrations::embed_migrations">embed_migrations</a></div><div class="desc docblock-short">This macro will read your migrations at compile time, and create a constant value containing
an embedded list of all your migrations as available at compile time.
This is useful if you would like to use Diesel’s migration infrastructure, but want to ship a single executable
file (such as for embedded applications). It can also be used to apply migrations to an in
memory database (Diesel does this for its own test suite).</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.EmbeddedMigrations.html" title="struct diesel_migrations::EmbeddedMigrations">EmbeddedMigrations</a></div><div class="desc docblock-short">A migration source that embeds migrations into the final binary</div></li><li><div class="item-name"><a class="struct" href="struct.FileBasedMigrations.html" title="struct diesel_migrations::FileBasedMigrations">FileBasedMigrations</a></div><div class="desc docblock-short">A migration source based on a migration directory in the file system</div></li><li><div class="item-name"><a class="struct" href="struct.HarnessWithOutput.html" title="struct diesel_migrations::HarnessWithOutput">HarnessWithOutput</a></div><div class="desc docblock-short">A migration harness that writes messages
into some output for each applied/reverted migration</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.MigrationHarness.html" title="trait diesel_migrations::MigrationHarness">MigrationHarness</a></div><div class="desc docblock-short">A migration harness is an entity which applies migration to an existing database</div></li></ul></section></div></main></body></html>