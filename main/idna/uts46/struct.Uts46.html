<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An implementation of UTS #46."><title>Uts46 in idna::uts46 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="idna" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (842bd5be2 2026-01-29)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../../static.files/storage-f9617a14.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-f7c3ffd8.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc struct"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Uts46</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../idna/index.html">idna</a><span class="version">1.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Uts46</a></h2><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.new" title="new">new</a></li><li><a href="#method.process" title="process">process</a></li><li><a href="#method.to_ascii" title="to_ascii">to_ascii</a></li><li><a href="#method.to_unicode" title="to_unicode">to_unicode</a></li><li><a href="#method.to_user_interface" title="to_user_interface">to_user_interface</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-Default-for-Uts46" title="Default">Default</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-Uts46" title="Freeze">Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-Uts46" title="RefUnwindSafe">RefUnwindSafe</a></li><li><a href="#impl-Send-for-Uts46" title="Send">Send</a></li><li><a href="#impl-Sync-for-Uts46" title="Sync">Sync</a></li><li><a href="#impl-Unpin-for-Uts46" title="Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe-for-Uts46" title="UnwindSafe">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T" title="Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T" title="Borrow&#60;T&#62;">Borrow&#60;T&#62;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T" title="BorrowMut&#60;T&#62;">BorrowMut&#60;T&#62;</a></li><li><a href="#impl-From%3CT%3E-for-T" title="From&#60;T&#62;">From&#60;T&#62;</a></li><li><a href="#impl-Into%3CU%3E-for-T" title="Into&#60;U&#62;">Into&#60;U&#62;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T" title="TryFrom&#60;U&#62;">TryFrom&#60;U&#62;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T" title="TryInto&#60;U&#62;">TryInto&#60;U&#62;</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In idna::<wbr>uts46</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">idna</a>::<wbr><a href="index.html">uts46</a></div><h1>Struct <span class="struct">Uts46</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/idna/uts46.rs.html#489-491">Source</a> </span></div><pre class="rust item-decl"><code>pub struct Uts46 { <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An implementation of UTS #46.</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Uts46" class="impl"><a class="src rightside" href="../../src/idna/uts46.rs.html#500-1683">Source</a><a href="#impl-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="src rightside" href="../../src/idna/uts46.rs.html#503-507">Source</a><h4 class="code-header">pub const fn <a href="#method.new" class="fn">new</a>() -&gt; Self</h4></section></summary><div class="docblock"><p>Constructor using data compiled into the binary.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_ascii" class="method"><a class="src rightside" href="../../src/idna/uts46.rs.html#527-540">Source</a><h4 class="code-header">pub fn <a href="#method.to_ascii" class="fn">to_ascii</a>&lt;'a&gt;(
    &amp;self,
    domain_name: &amp;'a [<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    ascii_deny_list: <a class="struct" href="struct.AsciiDenyList.html" title="struct idna::uts46::AsciiDenyList">AsciiDenyList</a>,
    hyphens: <a class="enum" href="enum.Hyphens.html" title="enum idna::uts46::Hyphens">Hyphens</a>,
    dns_length: <a class="enum" href="enum.DnsLength.html" title="enum idna::uts46::DnsLength">DnsLength</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;, <a class="struct" href="../struct.Errors.html" title="struct idna::Errors">Errors</a>&gt;</h4></section></summary><div class="docblock"><p>Performs the <a href="https://www.unicode.org/reports/tr46/#ToASCII">ToASCII</a> operation
from UTS #46 with the options indicated.</p>
<h5 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h5>
<ul>
<li><code>domain_name</code> - The input domain name as UTF-8 bytes. (The UTF-8ness is checked by
this method and input that is not well-formed UTF-8 is treated as an error. If you
already have a <code>&amp;str</code>, call <code>.as_bytes()</code> on it.)</li>
<li><code>ascii_deny_list</code> - What ASCII deny list, if any, to apply. The UTS 46
<em>UseSTD3ASCIIRules</em> flag or the WHATWG URL Standard forbidden domain code point
processing is handled via this argument. Most callers are probably the best off
by using <a href="struct.AsciiDenyList.html#associatedconstant.URL" title="associated constant idna::uts46::AsciiDenyList::URL"><code>AsciiDenyList::URL</code></a> here.</li>
<li><code>hyphens</code> - The UTS 46 <em>CheckHyphens</em> flag. Most callers are probably the best
off by using <a href="enum.Hyphens.html#variant.Allow" title="variant idna::uts46::Hyphens::Allow"><code>Hyphens::Allow</code></a> here.</li>
<li><code>dns_length</code> - The UTS 46 <em>VerifyDNSLength</em> flag.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_unicode" class="method"><a class="src rightside" href="../../src/idna/uts46.rs.html#610-617">Source</a><h4 class="code-header">pub fn <a href="#method.to_unicode" class="fn">to_unicode</a>&lt;'a&gt;(
    &amp;self,
    domain_name: &amp;'a [<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    ascii_deny_list: <a class="struct" href="struct.AsciiDenyList.html" title="struct idna::uts46::AsciiDenyList">AsciiDenyList</a>,
    hyphens: <a class="enum" href="enum.Hyphens.html" title="enum idna::uts46::Hyphens">Hyphens</a>,
) -&gt; (<a class="enum" href="https://doc.rust-lang.org/nightly/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;, <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="../struct.Errors.html" title="struct idna::Errors">Errors</a>&gt;)</h4></section></summary><div class="docblock"><p>Performs the <a href="https://www.unicode.org/reports/tr46/#ToUnicode">ToUnicode</a> operation
from UTS #46 according to the options given. When there
are errors, there is still output, which may be rendered user, even through
the output must not be used in networking protocols. Errors are denoted
by U+FFFD REPLACEMENT CHARACTERs in the output. (That is, if the second item of the
return tuple is <code>Err</code>, the first item of the return tuple is guaranteed to contain
at least one U+FFFD.)</p>
<p>Most applications probably shouldn’t use this method and should be using
<a href="struct.Uts46.html#method.to_user_interface" title="method idna::uts46::Uts46::to_user_interface"><code>Uts46::to_user_interface</code></a> instead.</p>
<h5 id="arguments-1"><a class="doc-anchor" href="#arguments-1">§</a>Arguments</h5>
<ul>
<li><code>domain_name</code> - The input domain name as UTF-8 bytes. (The UTF-8ness is checked by
this method and input that is not well-formed UTF-8 is treated as an error. If you
already have a <code>&amp;str</code>, call <code>.as_bytes()</code> on it.)</li>
<li><code>ascii_deny_list</code> - What ASCII deny list, if any, to apply. The UTS 46
<em>UseSTD3ASCIIRules</em> flag or the WHATWG URL Standard forbidden domain code point
processing is handled via this argument. Most callers are probably the best off
by using <a href="struct.AsciiDenyList.html#associatedconstant.URL" title="associated constant idna::uts46::AsciiDenyList::URL"><code>AsciiDenyList::URL</code></a> here.</li>
<li><code>hyphens</code> - The UTS 46 <em>CheckHyphens</em> flag. Most callers are probably the best
off by using <a href="enum.Hyphens.html#variant.Allow" title="variant idna::uts46::Hyphens::Allow"><code>Hyphens::Allow</code></a> here.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_user_interface" class="method"><a class="src rightside" href="../../src/idna/uts46.rs.html#665-691">Source</a><h4 class="code-header">pub fn <a href="#method.to_user_interface" class="fn">to_user_interface</a>&lt;'a, OutputUnicode: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.char.html">char</a>], &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.char.html">char</a>], <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;(
    &amp;self,
    domain_name: &amp;'a [<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    ascii_deny_list: <a class="struct" href="struct.AsciiDenyList.html" title="struct idna::uts46::AsciiDenyList">AsciiDenyList</a>,
    hyphens: <a class="enum" href="enum.Hyphens.html" title="enum idna::uts46::Hyphens">Hyphens</a>,
    output_as_unicode: OutputUnicode,
) -&gt; (<a class="enum" href="https://doc.rust-lang.org/nightly/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;, <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="../struct.Errors.html" title="struct idna::Errors">Errors</a>&gt;)</h4></section></summary><div class="docblock"><p>Performs the <a href="https://www.unicode.org/reports/tr46/#ToUnicode">ToUnicode</a> operation
from UTS #46 according to options given with some
error-free Unicode labels output according to
<a href="https://www.unicode.org/reports/tr46/#ToASCII">ToASCII</a> instead as decided by
application policy implemented via the <code>output_as_unicode</code> closure. The purpose
is to convert user-visible domains to the Unicode form in general but to render
potentially misleading labels as Punycode.</p>
<p>This is an imperfect security mechanism, because <a href="https://www.unicode.org/reports/tr36/#TablePunycodeSpoofing">the Punycode form itself may be
resemble a user-recognizable name</a>.
However, since this mechanism is common practice, this API provides support for The
the mechanism.</p>
<p>ASCII labels always pass through as ASCII and labels with errors always pass through
as Unicode. For non-erroneous labels that contain at least one non-ASCII character
(implies non-empty), <code>output_as_unicode</code> is called with the Unicode form of the label,
the TLD (potentially empty), and a flag indicating whether the domain name as a whole
is a bidi domain name. If the return value is <code>true</code>, the label passes through as
Unicode. If the return value is <code>false</code>, the label is converted to Punycode.</p>
<p>When there are errors, there is still output, which may be rendered user, even through
the output must not be used in networking protocols. Errors are denoted by
U+FFFD REPLACEMENT CHARACTERs in the output. (That is, if the second item
of the return tuple is <code>Err</code>, the first item of the return tuple is guaranteed to contain
at least one U+FFFD.) Labels that contain errors are not converted to Punycode.</p>
<h5 id="arguments-2"><a class="doc-anchor" href="#arguments-2">§</a>Arguments</h5>
<ul>
<li><code>domain_name</code> - The input domain name as UTF-8 bytes. (The UTF-8ness is checked by
this method and input that is not well-formed UTF-8 is treated as an error. If you
already have a <code>&amp;str</code>, call <code>.as_bytes()</code> on it.)</li>
<li><code>ascii_deny_list</code> - What ASCII deny list, if any, to apply. The UTS 46
<em>UseSTD3ASCIIRules</em> flag or the WHATWG URL Standard forbidden domain code point
processing is handled via this argument. Most callers are probably the best off
by using <a href="struct.AsciiDenyList.html#associatedconstant.URL" title="associated constant idna::uts46::AsciiDenyList::URL"><code>AsciiDenyList::URL</code></a> here.</li>
<li><code>hyphens</code> - The UTS 46 <em>CheckHyphens</em> flag. Most callers are probably the best
off by using <a href="enum.Hyphens.html#variant.Allow" title="variant idna::uts46::Hyphens::Allow"><code>Hyphens::Allow</code></a> here.</li>
<li><code>output_as_unicode</code> - A closure for deciding if a label should be output as Unicode
(as opposed to Punycode). The first argument is the label for which a decision is
needed (always non-empty slice). The second argument is the TLD (potentially empty).
The third argument is <code>true</code> iff the domain name as a whole is a bidi domain name.
Only non-erroneous labels that contain at least one non-ASCII character are passed
to the closure as the first argument. The second and third argument values are
guaranteed to remain the same during a single call to <code>process</code>, and the closure
may cache computations derived from the second and third argument (hence the
<code>FnMut</code> type).</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.process" class="method"><a class="src rightside" href="../../src/idna/uts46.rs.html#773-1045">Source</a><h4 class="code-header">pub fn <a href="#method.process" class="fn">process</a>&lt;W: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Write.html" title="trait core::fmt::Write">Write</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>, OutputUnicode: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.char.html">char</a>], &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.char.html">char</a>], <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;(
    &amp;self,
    domain_name: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    ascii_deny_list: <a class="struct" href="struct.AsciiDenyList.html" title="struct idna::uts46::AsciiDenyList">AsciiDenyList</a>,
    hyphens: <a class="enum" href="enum.Hyphens.html" title="enum idna::uts46::Hyphens">Hyphens</a>,
    error_policy: <a class="enum" href="enum.ErrorPolicy.html" title="enum idna::uts46::ErrorPolicy">ErrorPolicy</a>,
    output_as_unicode: OutputUnicode,
    sink: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut W</a>,
    ascii_sink: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut W</a>&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.ProcessingSuccess.html" title="enum idna::uts46::ProcessingSuccess">ProcessingSuccess</a>, <a class="enum" href="enum.ProcessingError.html" title="enum idna::uts46::ProcessingError">ProcessingError</a>&gt;</h4></section></summary><div class="docblock"><p>The lower-level function that <a href="struct.Uts46.html#method.to_ascii" title="method idna::uts46::Uts46::to_ascii"><code>Uts46::to_ascii</code></a>, <a href="struct.Uts46.html#method.to_unicode" title="method idna::uts46::Uts46::to_unicode"><code>Uts46::to_unicode</code></a>, and
<a href="struct.Uts46.html#method.to_user_interface" title="method idna::uts46::Uts46::to_user_interface"><code>Uts46::to_user_interface</code></a> are built on to allow support for output types other
than <code>Cow&lt;'a, str&gt;</code> (e.g. string types in a non-Rust programming language).</p>
<h5 id="arguments-3"><a class="doc-anchor" href="#arguments-3">§</a>Arguments</h5>
<ul>
<li><code>domain_name</code> - The input domain name as UTF-8 bytes. (The UTF-8ness is checked by
this method and input that is not well-formed UTF-8 is treated as an error. If you
already have a <code>&amp;str</code>, call <code>.as_bytes()</code> on it.)</li>
<li><code>ascii_deny_list</code> - What ASCII deny list, if any, to apply. The UTS 46
<em>UseSTD3ASCIIRules</em> flag or the WHATWG URL Standard forbidden domain code point
processing is handled via this argument. Most callers are probably the best off
by using <a href="struct.AsciiDenyList.html#associatedconstant.URL" title="associated constant idna::uts46::AsciiDenyList::URL"><code>AsciiDenyList::URL</code></a> here.</li>
<li><code>hyphens</code> - The UTS 46 <em>CheckHyphens</em> flag. Most callers are probably the best
off by using <a href="enum.Hyphens.html#variant.Allow" title="variant idna::uts46::Hyphens::Allow"><code>Hyphens::Allow</code></a> here.</li>
<li><code>error_policy</code> - Whether to fail fast or to produce output that may be rendered
for the user to examine in case of errors.</li>
<li><code>output_as_unicode</code> - A closure for deciding if a label should be output as Unicode
(as opposed to Punycode). The first argument is the label for which a decision is
needed (always non-empty slice). The second argument is the TLD (potentially empty).
The third argument is <code>true</code> iff the domain name as a whole is a bidi domain name.
Only non-erroneous labels that contain at least one non-ASCII character are passed
to the closure as the first argument. The second and third argument values are
guaranteed to remain the same during a single call to <code>process</code>, and the closure
may cache computations derived from the second and third argument (hence the
<code>FnMut</code> type). To perform the <em>ToASCII</em> operation, <code>|_, _, _| false</code> must be
passed as the closure. To perform the <em>ToUnicode</em> operation, <code>|_, _, _| true</code> must
be passed as the closure. A more complex closure may be used to prepare a domain
name for display in a user interface so that labels are converted to the Unicode
form in general but potentially misleading labels are converted to the Punycode
form.</li>
<li><code>sink</code> - The object that receives the output (in the non-passthrough case).</li>
<li><code>ascii_sink</code> - A second sink that receives the <em>ToASCII</em> form only if there
were no errors and <code>sink</code> received at least one character of non-ASCII output.
The purpose of this argument is to enable a user interface display form of the
domain and the <em>ToASCII</em> form of the domain to be computed efficiently together.
This argument is useless when <code>output_as_unicode</code> always returns <code>false</code>, in
which case the <em>ToASCII</em> form ends up in <code>sink</code> already. If <code>ascii_sink</code> receives
no output and the return value is <code>Ok(ProcessingSuccess::WroteToSink)</code>, use the
output received by <code>sink</code> also as the <em>ToASCII</em> result.</li>
</ul>
<h5 id="return-value"><a class="doc-anchor" href="#return-value">§</a>Return value</h5>
<ul>
<li><code>Ok(ProcessingSuccess::Passthrough)</code> - The caller must treat
<code>unsafe { core::str::from_utf8_unchecked(domain_name) }</code> as the output. (This
return value asserts that calling <code>core::str::from_utf8_unchecked(domain_name)</code>
is safe.)</li>
<li><code>Ok(ProcessingSuccess::WroteToSink)</code> - The caller must treat was was written
to <code>sink</code> as the output. If another sink was passed as <code>ascii_sink</code> but it did
not receive output, the caller must treat what was written to <code>sink</code> also as
the <em>ToASCII</em> output. Otherwise, if <code>ascii_sink</code> received output, the caller
must treat what was written to <code>ascii_sink</code> as the <em>ToASCII</em> output.</li>
<li><code>Err(ProcessingError::ValidityError)</code> - The input was in error and must
not be used for DNS lookup or otherwise in a network protocol. If <code>error_policy</code>
was <code>ErrorPolicy::MarkErrors</code>, the output written to <code>sink</code> may be displayed
to the user as an illustration of where the error was or the errors were.</li>
<li><code>Err(ProcessingError::SinkError)</code> - Either <code>sink</code> or <code>ascii_sink</code> returned
<a href="https://doc.rust-lang.org/nightly/core/fmt/struct.Error.html" title="struct core::fmt::Error"><code>core::fmt::Error</code></a>. The partial output written to <code>sink</code> <code>ascii_sink</code> must not
be used. If <code>W</code> never returns <a href="https://doc.rust-lang.org/nightly/core/fmt/struct.Error.html" title="struct core::fmt::Error"><code>core::fmt::Error</code></a>, this method never returns
<code>Err(ProcessingError::SinkError)</code>.</li>
</ul>
<h5 id="safety-usable-invariant"><a class="doc-anchor" href="#safety-usable-invariant">§</a>Safety-usable invariant</h5>
<p>If the return value is <code>Ok(ProcessingSuccess::Passthrough)</code>, <code>domain_name</code> is
ASCII and <code>core::str::from_utf8_unchecked(domain_name)</code> is safe. (Note:
Other return values do <em>not</em> imply that <code>domain_name</code> wasn’t ASCII!)</p>
<h5 id="security-considerations"><a class="doc-anchor" href="#security-considerations">§</a>Security considerations</h5>
<p>Showing labels whose Unicode form might mislead the user as Punycode instead is
an imperfect security mechanism, because <a href="https://www.unicode.org/reports/tr36/#TablePunycodeSpoofing">the Punycode form itself may be resemble
a user-recognizable name</a>.
However, since this mechanism is common practice, this API provides support for the
the mechanism.</p>
<p>Punycode processing is quadratic, so to avoid denial of service, this method imposes
length limits on Punycode treating especially long inputs as being in error. These
limits are well higher than the DNS length limits and are not more restrictive than
the limits imposed by ICU4C.</p>
</div></details></div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Default-for-Uts46" class="impl"><a class="src rightside" href="../../src/idna/uts46.rs.html#494-498">Source</a><a href="#impl-Default-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>compiled_data</code></strong> only.</div></span></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.default" class="method trait-impl"><a class="src rightside" href="../../src/idna/uts46.rs.html#495-497">Source</a><a href="#method.default" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default" class="fn">default</a>() -&gt; Self</h4></section></summary><div class='docblock'>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-Uts46" class="impl"><a href="#impl-Freeze-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section><section id="impl-RefUnwindSafe-for-Uts46" class="impl"><a href="#impl-RefUnwindSafe-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section><section id="impl-Send-for-Uts46" class="impl"><a href="#impl-Send-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section><section id="impl-Sync-for-Uts46" class="impl"><a href="#impl-Sync-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section><section id="impl-Unpin-for-Uts46" class="impl"><a href="#impl-Unpin-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section><section id="impl-UnwindSafe-for-Uts46" class="impl"><a href="#impl-UnwindSafe-for-Uts46" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Uts46.html" title="struct idna::uts46::Uts46">Uts46</a></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#138">Source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#139">Source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#212">Source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214">Source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221">Source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#222">Source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#785">Source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#788">Source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#767-769">Source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#777">Source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#827-829">Source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#831">Source</a><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#834">Source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#811-813">Source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#815">Source</a><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#818">Source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>